[gd_scene load_steps=14 format=2]

[ext_resource path="res://enemyMaster.tscn" type="PackedScene" id=1]
[ext_resource path="res://Entita/player/player.tscn" type="PackedScene" id=2]
[ext_resource path="res://testott/dun1ott.glb" type="PackedScene" id=3]
[ext_resource path="res://Entita/Nemici/scheletro.tscn" type="PackedScene" id=4]
[ext_resource path="res://tileNormal.png" type="Texture" id=5]

[sub_resource type="PlaneMesh" id=1]
size = Vector2( 20, 20 )

[sub_resource type="Shader" id=2]
code = "shader_type spatial;
render_mode blend_mix,depth_draw_opaque,cull_back,diffuse_burley,specular_schlick_ggx,ensure_correct_normals;
uniform vec4 albedo : hint_color;
uniform sampler2D texture_albedo : hint_albedo;
uniform float specular;
uniform float metallic;
uniform float roughness : hint_range(0,1);
uniform float point_size : hint_range(0,128);
uniform sampler2D texture_normal : hint_normal;
uniform float normal_scale : hint_range(-16,16);
uniform vec3 uv1_scale;
uniform vec3 uv1_offset;
uniform vec3 uv2_scale;
uniform vec3 uv2_offset;


void vertex() {
	UV=UV*uv1_scale.xy+uv1_offset.xy;
}




void fragment() {
	vec2 base_uv = UV;
	vec4 albedo_tex = texture(texture_albedo,base_uv);
	ALBEDO = albedo.rgb * albedo_tex.rgb;
	METALLIC = metallic;
	ROUGHNESS = roughness;
	SPECULAR = specular;
	NORMALMAP = texture(texture_normal,base_uv).rgb;
	NORMALMAP_DEPTH = normal_scale;
}
"

[sub_resource type="ShaderMaterial" id=3]
shader = SubResource( 2 )
shader_param/albedo = Color( 0.501961, 0.501961, 0.501961, 1 )
shader_param/specular = 0.5
shader_param/metallic = 0.0
shader_param/roughness = 1.0
shader_param/point_size = 1.0
shader_param/normal_scale = 3.0
shader_param/uv1_scale = Vector3( 3, 3, 3 )
shader_param/uv1_offset = Vector3( 0, 0, 0 )
shader_param/uv2_scale = Vector3( 1, 1, 1 )
shader_param/uv2_offset = Vector3( 0, 0, 0 )
shader_param/texture_normal = ExtResource( 5 )

[sub_resource type="BoxShape" id=4]
extents = Vector3( 12.2272, 1, 13.4603 )

[sub_resource type="BoxShape" id=5]
extents = Vector3( 1.29933, 1.44577, 2.34406 )

[sub_resource type="BoxShape" id=6]
extents = Vector3( 1.51091, 2.28428, 1.53488 )

[sub_resource type="BoxShape" id=7]
extents = Vector3( 4.66518, 2.1664, 2.44997 )

[sub_resource type="SpatialMaterial" id=8]
flags_ensure_correct_normals = true
albedo_color = Color( 0.501961, 0.501961, 0.501961, 1 )
normal_enabled = true
normal_scale = 3.0
normal_texture = ExtResource( 5 )
uv1_scale = Vector3( 3, 3, 3 )

[node name="Spatial" type="Spatial"]

[node name="player" parent="." instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.6536, 0 )

[node name="OmniLight" type="OmniLight" parent="player"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 7.10495, -2.12481 )
light_color = Color( 1, 0.909804, 0.776471, 1 )
shadow_enabled = true
omni_range = 18.6729
omni_attenuation = 0.277393

[node name="Spatial" type="Spatial" parent="."]
transform = Transform( -1, 0, -3.25841e-07, 0, 1, 0, 3.25841e-07, 0, -1, 0, 0, 0 )

[node name="dun1ott" parent="Spatial" instance=ExtResource( 3 )]

[node name="MeshInstance" type="MeshInstance" parent="Spatial"]
transform = Transform( 1.18598, 0, 0, 0, 1, 0, 0, 0, 1.37195, 0, -0.54959, 0 )
mesh = SubResource( 1 )
material/0 = SubResource( 3 )

[node name="StaticBody" type="StaticBody" parent="Spatial"]
transform = Transform( -1, 0, 3.25841e-07, 0, 1, 0, -3.25841e-07, 0, -1, 0, 0, 0 )

[node name="CollisionShape" type="CollisionShape" parent="Spatial/StaticBody"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.1934, 0 )
shape = SubResource( 4 )

[node name="CollisionShape2" type="CollisionShape" parent="Spatial/StaticBody"]
transform = Transform( 0.834271, 0, 0.551355, 0, 1, 0, -0.551355, 0, 0.834271, -8.89615, 1.65324, 8.03797 )
shape = SubResource( 5 )

[node name="CollisionShape3" type="CollisionShape" parent="Spatial/StaticBody"]
transform = Transform( 0.0321258, 0, 0.999484, 0, 1, 0, -0.999484, 0, 0.0321258, -4.33295, 2.5673, 7.19397 )
shape = SubResource( 6 )

[node name="CollisionShape4" type="CollisionShape" parent="Spatial/StaticBody"]
transform = Transform( 0.0321258, 0, 0.999484, 0, 1, 0, -0.999484, 0, 0.0321258, 4.22095, 2.5673, 7.19397 )
shape = SubResource( 6 )

[node name="CollisionShape5" type="CollisionShape" parent="Spatial/StaticBody"]
transform = Transform( 0.0321259, 0, 0.999485, 0, 1, 0, -0.999485, 0, 0.0321259, 9.08721, 2.16975, 5.87299 )
shape = SubResource( 7 )

[node name="Spatial2" type="Spatial" parent="."]
transform = Transform( -1, 0, -3.25841e-07, 0, 1, 0, 3.25841e-07, 0, -1, 0, 0, 27.3426 )

[node name="dun1ott" parent="Spatial2" instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.342968, 0.105774, 0 )

[node name="MeshInstance" type="MeshInstance" parent="Spatial2"]
transform = Transform( 1.18598, 0, 0, 0, 1, 0, 0, 0, 1.37195, 0, -0.54959, 0 )
mesh = SubResource( 1 )
material/0 = SubResource( 8 )

[node name="StaticBody" type="StaticBody" parent="Spatial2"]
transform = Transform( -1, 0, 3.25841e-07, 0, 1, 0, -3.25841e-07, 0, -1, 0, 0, 0 )

[node name="CollisionShape" type="CollisionShape" parent="Spatial2/StaticBody"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.1934, 0 )
shape = SubResource( 4 )

[node name="Spatial7" type="Spatial" parent="."]
transform = Transform( -1, 0, -3.25841e-07, 0, 1, 0, 3.25841e-07, 0, -1, 0, 0, -26.7169 )

[node name="dun1ott" parent="Spatial7" instance=ExtResource( 3 )]

[node name="MeshInstance" type="MeshInstance" parent="Spatial7"]
transform = Transform( 1.18598, 0, 0, 0, 1, 0, 0, 0, 1.37195, 0, -0.54959, 0 )
mesh = SubResource( 1 )
material/0 = SubResource( 8 )

[node name="StaticBody" type="StaticBody" parent="Spatial7"]
transform = Transform( -1, 0, 3.25841e-07, 0, 1, 0, -3.25841e-07, 0, -1, 0, 0, 0 )

[node name="CollisionShape" type="CollisionShape" parent="Spatial7/StaticBody"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.1934, 0 )
shape = SubResource( 4 )

[node name="Spatial3" type="Spatial" parent="."]
transform = Transform( -0.0097384, 0, -0.999953, 0, 1, 0, 0.999953, 0, -0.0097384, 25.6607, 0, 15.7645 )

[node name="dun1ott" parent="Spatial3" instance=ExtResource( 3 )]

[node name="MeshInstance" type="MeshInstance" parent="Spatial3"]
transform = Transform( 1.18598, 0, 0, 0, 1, 0, 0, 0, 1.37195, 0, -0.54959, 0 )
mesh = SubResource( 1 )
material/0 = SubResource( 8 )

[node name="StaticBody" type="StaticBody" parent="Spatial3"]
transform = Transform( -1, 0, 3.25841e-07, 0, 1, 0, -3.25841e-07, 0, -1, 0, 0, 0 )

[node name="CollisionShape" type="CollisionShape" parent="Spatial3/StaticBody"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.1934, 0 )
shape = SubResource( 4 )

[node name="Spatial4" type="Spatial" parent="."]
transform = Transform( 0.00471204, 0, 0.999989, 0, 1, 0, -0.999989, 0, 0.00471204, -25.558, 0, 15.2821 )

[node name="dun1ott" parent="Spatial4" instance=ExtResource( 3 )]

[node name="MeshInstance" type="MeshInstance" parent="Spatial4"]
transform = Transform( 1.18598, 0, 0, 0, 1, 0, 0, 0, 1.37195, 0, -0.54959, 0 )
mesh = SubResource( 1 )
material/0 = SubResource( 8 )

[node name="StaticBody" type="StaticBody" parent="Spatial4"]
transform = Transform( -1, 0, 3.25841e-07, 0, 1, 0, -3.25841e-07, 0, -1, 0, 0, 0 )

[node name="CollisionShape" type="CollisionShape" parent="Spatial4/StaticBody"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.1934, 0 )
shape = SubResource( 4 )

[node name="Spatial5" type="Spatial" parent="."]
transform = Transform( 0.00471204, 0, 0.999989, 0, 1, 0, -0.999989, 0, 0.00471204, -25.558, 0, -10.1634 )

[node name="dun1ott" parent="Spatial5" instance=ExtResource( 3 )]

[node name="MeshInstance" type="MeshInstance" parent="Spatial5"]
transform = Transform( 1.18598, 0, 0, 0, 1, 0, 0, 0, 1.37195, 0, -0.54959, 0 )
mesh = SubResource( 1 )
material/0 = SubResource( 8 )

[node name="StaticBody" type="StaticBody" parent="Spatial5"]
transform = Transform( -1, 0, 3.25841e-07, 0, 1, 0, -3.25841e-07, 0, -1, 0, 0, 0 )

[node name="CollisionShape" type="CollisionShape" parent="Spatial5/StaticBody"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.1934, 0 )
shape = SubResource( 4 )

[node name="Spatial6" type="Spatial" parent="."]
transform = Transform( -1.62921e-07, 0, -1, 0, 1, 0, 1, 0, -1.62921e-07, 25.7207, 0, -10.1634 )

[node name="dun1ott" parent="Spatial6" instance=ExtResource( 3 )]

[node name="MeshInstance" type="MeshInstance" parent="Spatial6"]
transform = Transform( 1.18598, 0, 0, 0, 1, 0, 0, 0, 1.37195, 0, -0.54959, 0 )
mesh = SubResource( 1 )
material/0 = SubResource( 8 )

[node name="StaticBody" type="StaticBody" parent="Spatial6"]
transform = Transform( -1, 0, 3.25841e-07, 0, 1, 0, -3.25841e-07, 0, -1, 0, 0, 0 )

[node name="CollisionShape" type="CollisionShape" parent="Spatial6/StaticBody"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.1934, 0 )
shape = SubResource( 4 )

[node name="enemyMaster" parent="." instance=ExtResource( 1 )]

[node name="Combattente" parent="enemyMaster" instance=ExtResource( 4 )]
transform = Transform( 0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0.397068, 1.88187, 5.982 )

[node name="Combattente2" parent="enemyMaster" instance=ExtResource( 4 )]
transform = Transform( 0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, -6.37229, 1.88187, -4.02627 )

[node name="Combattente3" parent="enemyMaster" instance=ExtResource( 4 )]
transform = Transform( 0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 7.47323, 1.88187, -5.5768 )

[node name="Combattente4" parent="enemyMaster" instance=ExtResource( 4 )]
transform = Transform( 0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0.873664, 1.88187, -4.02627 )

[node name="Combattente5" parent="enemyMaster" instance=ExtResource( 4 )]
transform = Transform( 0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 7.64302, 1.88187, 16.5965 )

[node name="Combattente6" parent="enemyMaster" instance=ExtResource( 4 )]
transform = Transform( 0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0.873664, 1.88187, 7.49292 )
